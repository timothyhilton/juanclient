package juan.modules.render;

import java.util.List;

import org.lwjgl.input.Keyboard;

import juan.Client;
import juan.events.Event;
import juan.events.listeners.EventKey;
import juan.events.listeners.EventRenderGUI;
import juan.events.listeners.EventUpdate;
import juan.modules.Module;
import net.minecraft.client.gui.FontRenderer;
import net.minecraft.client.gui.Gui;

public class TabGUI extends Module {
	
	public int currentTab, moduleIndex;
	public boolean expanded;
	
	public TabGUI() {
		super("TabGUI", Keyboard.KEY_NONE, Category.RENDER);
		toggled = true;
	}
	
	public void onEvent(Event e) {
		if(e instanceof EventRenderGUI) {
			FontRenderer fr = mc.fontRendererObj;
			
			// main box
			Gui.drawRect(1, 20, 53, 74, 0x90000000);
			
			// selected category box
			float tabOffset = currentTab * 13;
			Gui.drawRect(2, 21 + tabOffset, 52, 34 + tabOffset, 0x90000000);
			
			// category text
			int count = 0;
			for(Category c : Module.Category.values()) {
				int offset = count * 13;
				fr.drawStringWithShadow(c.name, 4, 24 + offset, -1);
				
				count++;
			}
			
			if(expanded) {
				List<Module> modules = Client.getModulesByCategory(Module.Category.values()[currentTab]);
				
				// main box for modules
				Gui.drawRect(54, 20, 53 + 70, 74, 0x90000000);
				
				// selected module box
				float moduleOffset = moduleIndex * 13;
				Gui.drawRect(55, 21 + moduleOffset, 52 + 70, 34 + moduleOffset, 0x90000000);
				
				// module text
				count = 0;
				for(Module m : modules) {
					int offset = count * 13;
					fr.drawStringWithShadow(m.name, 4 + 54, 24 + offset, -1);
					
					count++;
				}
			}
		}
		
		if(e instanceof EventKey) {
			int code = ((EventKey)e).code;
			
			if(code == Keyboard.KEY_UP) {
				if(expanded) {
					
				} else {
					if(currentTab <= 0) {
						currentTab = Module.Category.values().length -1;
					} else {
						currentTab--;
					}
				}
			}
			if(code == Keyboard.KEY_DOWN) {
				if(expanded) {
					
				} else {
					if(currentTab >= Module.Category.values().length - 1) {
						currentTab = 0;
					} else {
						currentTab++;
					}
				}
				
			}
			if(code == Keyboard.KEY_RIGHT) {
				expanded = true;
			}
			if(code == Keyboard.KEY_LEFT) {
				expanded = false;
			}
		}
	}
	
}
